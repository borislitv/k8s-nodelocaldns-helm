---
image:
  repository: k8s.gcr.io/k8s-dns-node-cache
  pullPolicy: IfNotPresent
  tag: 1.15.13

imagePullSecrets: []

config:
  localDnsIp: 169.254.20.11
  nodeLocalSvcIp: __PILLAR__CLUSTER__DNS__   # Set to kubedns/CoreDNS service IP when using IPVS. For iptables leave default.
  upstreamDns: __PILLAR__UPSTREAM__SERVERS__ # defaults to /etc/resolv.conf
  upstreamDnsUseTcp: true

useHostNetwork: true

service:
  type: ClusterIP
  udpPort: 53
  tcpPort: 53
  upstreamSelector:
    k8s-app: kube-dns # Set to coredns when using coredns

updateStrategy:
  rollingUpdate:
    maxUnavailable: 10%

priorityClassName: system-node-critical
podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "9253"
podSecurityContext: {}

securityContext:
  privileged: true

livenessProbe:
  httpGet:
    host: 169.254.20.11
    path: /health
    port: 8080
  initialDelaySeconds: 60
  timeoutSeconds: 5

readinessProbe:

serviceAccount:
  create: true
  annotations: {}
  name: ""

nodeSelector: {}
affinity: {}

tolerations:
  - key: CriticalAddonsOnly
    operator: Exists
  - effect: NoExecute
    operator: Exists
  - effect: NoSchedule
    operator: Exists

resources:
  requests:
    cpu: 25m
    memory: 5Mi

